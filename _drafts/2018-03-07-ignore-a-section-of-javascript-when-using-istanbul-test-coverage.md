---
layout: single
title: 'How to Ignore a Section of JavaScript When Using Istanbul Test Coverage? '
date: '2018-03-07T19:55:00.000-08:00'
categories: Web
tags:
- JavaScript
- Test Coverage
- Istanbul
---

Sometimes, part of the code is hard to test. For example, I have this section of code to export my class so that it can be attached to window object when it is used on a browser.<br /><br />For example<br /><!--?xml version="1.0" encoding="UTF-8"?-->  <br /><div style="-en-codeblock: true; background-color: #fbfaf8; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); box-sizing: border-box; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; padding: 8px;"><div><span style="font-family: &quot;monaco&quot;;">class MyClass {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;...</span></div><div><span style="font-family: &quot;monaco&quot;;">}&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div><br style="font-family: Monaco;" /></div><div><span style="font-family: &quot;monaco&quot;;">if (typeof window !== 'undefined'</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&amp;&amp; typeof window.MyClass === 'undefined') {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;window.MyClass = MyClass;</span></div><div><span style="font-family: &quot;monaco&quot;;">}</span></div></div><br />How to achieve 100% code coverage using Istanbul if I can't really write unit tests for this section of code?<br /><h3><a href="https://istanbul.js.org/" target="_blank">Istanbul</a></h3><div style="text-align: center;"><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://2.bp.blogspot.com/-pDZ3p0jwewo/Wpol3I_Df5I/AAAAAAAAAkI/vbUPp58v8mIaiPrKLNZ1mg73rDsYN03tACLcBGAs/s1600/istanbul-homepage.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img alt="Istanbul Homepage" border="0" data-original-height="727" data-original-width="1188" height="390" src="https://2.bp.blogspot.com/-pDZ3p0jwewo/Wpol3I_Df5I/AAAAAAAAAkI/vbUPp58v8mIaiPrKLNZ1mg73rDsYN03tACLcBGAs/s640/istanbul-homepage.png" title="Istanbul Homepage" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Istanbul Homepage</td></tr></tbody></table></div><div><br /></div><div>Taken from Istanbul GitHub page, Istanbul is a JavaScript code coverage tool that computes statement, line, function and branch coverage with module loader hooks to transparently add coverage when running tests.</div><div><br /></div>Check out <a href="https://github.com/gotwarlost/istanbul/blob/master/ignoring-code-for-coverage.md" target="_blank">Istanbul ignoring code for coverage purpose document on GitHub</a>&nbsp;to find out more examples on how to use it.<br /><br />You can do the following to ignore part of the code for test coverage purpose.<br /><div><br /></div><!--?xml version="1.0" encoding="UTF-8"?-->  <br /><div style="border-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.15); box-sizing: border-box; color: #333333; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; padding: 8px;"><div style="background-color: #fbfaf8;"><span style="font-family: &quot;monaco&quot;;">class MyClass {</span></div><div style="background-color: #fbfaf8;"><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;...</span></div><div style="background-color: #fbfaf8;"><span style="font-family: &quot;monaco&quot;;">}&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div style="background-color: #fbfaf8;"><br style="font-family: Monaco;" /></div><div><span style="background-color: yellow; font-family: &quot;monaco&quot;;">/* istanbul ignore next */</span></div><div style="background-color: #fbfaf8;"><span style="font-family: &quot;monaco&quot;;">if (typeof window !== 'undefined'</span></div><div style="background-color: #fbfaf8;"><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&amp;&amp; typeof window.MyClass === 'undefined') {</span></div><div style="background-color: #fbfaf8;"><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;window.MyClass = MyClass;</span></div><div style="background-color: #fbfaf8;"><span style="font-family: &quot;monaco&quot;;">}</span></div></div><br />There are these instructions<br /><div><br /></div><!--?xml version="1.0" encoding="UTF-8"?-->  <br /><div style="-en-codeblock: true; background-color: #fbfaf8; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); box-sizing: border-box; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; padding: 8px;"><div><span style="font-family: &quot;monaco&quot;;">/* istanbul ignore next */</span></div><div><span style="font-family: &quot;monaco&quot;;">/* istanbul ignore if */</span></div><div><span style="font-family: &quot;monaco&quot;;">/* istanbul ignore else */</span></div></div><br />Thanks for reading!<br /><br /><a href="http://www.language-diary.com/p/jun711-language-diary.html" target="_blank">Jun</a><br /><div><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div>