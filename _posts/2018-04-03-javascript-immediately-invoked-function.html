---
layout: single
title: "#JavaScript - Immediately Invoked Function Expression"
date: '2018-04-03T21:35:00.002-07:00'
author: Jun
tags:
- JavaScript
modified_time: '2018-04-03T21:35:29.221-07:00'
thumbnail: https://2.bp.blogspot.com/-NLJnPSnNnX4/WsRLe1X1SlI/AAAAAAAABEk/RqvR5wlVA28nJR5Pl19L9E1tkNOkLuIegCLcBGAs/s72-c/mdn-immediately-invoked-function-expression.png
blogger_id: tag:blogger.com,1999:blog-2993513364068924658.post-8553647882669923254
blogger_orig_url: https://www.language-diary.com/2018/04/javascript-immediately-invoked-function.html
---

<h3>Immediately Invoked Function Expression</h3><div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><br /><a href="https://2.bp.blogspot.com/-NLJnPSnNnX4/WsRLe1X1SlI/AAAAAAAABEk/RqvR5wlVA28nJR5Pl19L9E1tkNOkLuIegCLcBGAs/s1600/mdn-immediately-invoked-function-expression.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="561" data-original-width="1097" height="326" src="https://2.bp.blogspot.com/-NLJnPSnNnX4/WsRLe1X1SlI/AAAAAAAABEk/RqvR5wlVA28nJR5Pl19L9E1tkNOkLuIegCLcBGAs/s640/mdn-immediately-invoked-function-expression.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">MDN Immediately Invoked Function Expression</td></tr></tbody></table><div style="text-align: center;"><br /></div><a href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE" target="_blank">Immediately Invoked Function Expression</a>&nbsp;or self-executing anonymous function is a function that executes immediately after it is interpreted.</div><div><h3>Use cases:</h3>1)</div><!--?xml version="1.0" encoding="UTF-8"?-->  <br /><div style="background-color: #fbfaf8; border-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.15); box-sizing: border-box; color: #333333; font-size: 12px; padding: 8px;"><div style="font-family: monaco, menlo, consolas, &quot;courier new&quot;, monospace;"><span style="font-family: &quot;monaco&quot;;">var a = 5;</span><br /><span style="font-family: &quot;monaco&quot;;"><br /></span> <span style="font-family: &quot;monaco&quot;;">(function() {</span></div><div><div style="font-family: monaco, menlo, consolas, &quot;courier new&quot;, monospace;"><span style="font-family: &quot;monaco&quot;;">&nbsp; var a = 3;</span></div><span style="font-family: &quot;monaco&quot;;">&nbsp; console.log(a)&nbsp;</span></div><div style="font-family: monaco, menlo, consolas, &quot;courier new&quot;, monospace;"><span style="font-family: &quot;monaco&quot;;">})();</span><br /><span style="font-family: &quot;monaco&quot;;">// 3</span></div></div><br />The variables defined in this expression remains in its own local scope and thus doesn't modify or be affected by the global scope variables.<br /><br />2)<br /><!--?xml version="1.0" encoding="UTF-8"?-->  <br /><div style="-en-codeblock: true; background-color: #fbfaf8; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); box-sizing: border-box; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; padding: 8px;"><div><span style="font-family: &quot;monaco&quot;;">(function() {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;var localVar = 3;</span></div><div><span style="font-family: &quot;monaco&quot;;">})();</span></div><div><br /></div><div><span style="font-family: &quot;monaco&quot;;">localVar // Reference error</span></div></div><br />You will get a reference error if you try to access a variable defined within a immediately invoked function expression.<br /><br />3)<br />It can be used to create <b>private variables</b> or <b>private methods</b> for <b>encapsulation</b> and data hiding.<br /><!--?xml version="1.0" encoding="UTF-8"?-->  <br /><div style="-en-codeblock: true; background-color: #fbfaf8; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); box-sizing: border-box; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; padding: 8px;"><div><span style="font-family: &quot;monaco&quot;;">let counter = (function() {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;var privateCounter = 0;</span></div><div>&nbsp; function changeBy(val) {</div><div>&nbsp; &nbsp; privateCounter&nbsp;+= val;</div><div>&nbsp; }</div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;return {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;get: function() {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return privateCounter;</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;},</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp; &nbsp; de</span><span style="font-family: &quot;monaco&quot;;">crement: function() {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp; &nbsp; &nbsp; changeBy(-1);</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;increment: function() {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp; &nbsp; &nbsp; changeBy(1);&nbsp;&nbsp;</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;};</span></div><div><span style="font-family: &quot;monaco&quot;;">})();</span></div><div><span style="font-family: &quot;monaco&quot;;"><br /></span></div><div>counter.get() // 0</div><div>counter.decrement() // -1</div><div>counter.increment() // 0</div><div>counter.increment() // 1</div><div>privateCounter = 5 // create a global scope variable called privateCounter</div><div>counter.get() // count is still 1</div></div><br />4)<br />Associate an item in a loop with its respective item instead of the last item as the value is only assigned the function within the loop is called instead of when the loop is run.<br /><div style="-en-codeblock: true; background-color: #fbfaf8; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); box-sizing: border-box; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; padding: 8px;"><div><span style="color: #333333; font-family: &quot;monaco&quot;; font-size: 12px;">&lt;p id="help"&gt;Description will appear here&lt;/p&gt;</span></div><div><span style="color: #333333; font-family: &quot;monaco&quot;; font-size: 12px;">&lt;p&gt;E-mail: &lt;input type="text" id="email" name="email"&gt;&lt;/p&gt;</span></div><div><span style="color: #333333; font-family: &quot;monaco&quot;; font-size: 12px;">&lt;p&gt;Name: &lt;input type="text" id="name" name="name"&gt;&lt;/p&gt;</span></div><div><span style="color: #333333; font-family: &quot;monaco&quot;; font-size: 12px;">&lt;p&gt;Age: &lt;input type="text" id="age" name="age"&gt;&lt;/p&gt;</span></div><div><span style="font-family: &quot;monaco&quot;;">&lt;p&gt;Username: &lt;input type="text" id="u</span><span style="font-family: &quot;monaco&quot;;">sername</span><span style="font-family: &quot;monaco&quot;;">" name="u</span><span style="font-family: &quot;monaco&quot;;">sername</span><span style="font-family: &quot;monaco&quot;;">"&gt;&lt;/p&gt;</span></div></div><div><br /></div><!--?xml version="1.0" encoding="UTF-8"?-->  <br /><div style="-en-codeblock: true; background-color: #fbfaf8; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); box-sizing: border-box; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; padding: 8px;"><div><span style="font-family: &quot;monaco&quot;;">function showHelp(help) {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;document.getElementById('help').innerHTML = help;</span></div><div><span style="font-family: &quot;monaco&quot;;">}</span></div><div><br style="font-family: Monaco;" /></div><div><span style="font-family: &quot;monaco&quot;;">function setupHelp() {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;var helpText = [</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'id': 'email', 'help': 'Your email address'},</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'id': 'name', 'help': 'Your first name'},</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'id': 'age', 'help': 'Your age (you must be over 16)'},</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-family: &quot;monaco&quot;;">{'id': 'username', 'help': 'Pick a unique username'}</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;];</span></div><div><br style="font-family: Monaco;" /></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;for (var i = 0; i &lt; helpText.length; i++) {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;var item = helpText[i];</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;document.getElementById(item.id).onfocus = function() {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showHelp(item.help);</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;}</span></div><div><span style="font-family: &quot;monaco&quot;;">}</span></div><div><br style="font-family: Monaco;" /></div><div><span style="font-family: &quot;monaco&quot;;">setupHelp();</span></div></div>source: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures" target="_blank">MDN Closure</a><br /><br />The description p tag will always show&nbsp;'Pick a unique username' no matter which input you select because when you set the input on focus, the loop had already finished executing and thus, i counter in the loop would be 3 and points to&nbsp;{'id': 'username', 'help': 'Pick a unique username'}.<br /><br />One way to fix it is to use Immediately Invoked Function Expression.<br /><div style="-en-codeblock: true; background-color: #fbfaf8; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); box-sizing: border-box; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; padding: 8px;"><div><span style="font-family: &quot;monaco&quot;;">for (var i = 0; i &lt; helpText.length; i++) {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;(function() {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var item = helpText[i];</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.getElementById(item.id).onfocus = function() {</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showHelp(item.help);</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-family: &quot;monaco&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;})(); <br />// Immediate event listener attachment with the current i of item when the loop is iterated.&nbsp;</span></div></div><br /><br />References:<br />1) <a href="https://stackoverflow.com/questions/17058606/why-using-self-executing-function" target="_blank">why-using-self-executing-function StackOverflow thread</a><br />2) <a href="https://stackoverflow.com/questions/8228281/what-is-the-function-construct-in-javascript" target="_blank">What is the (function() { } )() construct in JavaScript?</a><br /><div><br /></div>Thank you for reading!<br /><br /><a href="http://www.language-diary.com/p/jun711-language-diary.html" target="_blank">Jun</a><br /><div><br /></div>