---
layout: single
title: "#Nodejs - X-Forwarded-Proto header"
date: '2018-02-07T22:24:00.000-08:00'
author: Jun
tags:
- JavaScript
- TLS
- Node.js
- SSL
modified_time: '2018-04-09T23:13:16.932-07:00'
thumbnail: https://2.bp.blogspot.com/-25FE9IbGZf4/Wr32xr4UKiI/AAAAAAAAAx8/e3psTmdRd4gmZVd-aXWAAIGuhlYntjZXgCK4BGAYYCw/s72-c/X-Forwarded-Proto%2Bheader-mdn.png
blogger_id: tag:blogger.com,1999:blog-2993513364068924658.post-4895115135416953262
blogger_orig_url: https://www.language-diary.com/2018/02/nodejs-x-forwarded-proto-header.html
---

<h3>X-Forwarded-Proto</h3><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-25FE9IbGZf4/Wr32xr4UKiI/AAAAAAAAAx8/e3psTmdRd4gmZVd-aXWAAIGuhlYntjZXgCK4BGAYYCw/s1600/X-Forwarded-Proto%2Bheader-mdn.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img alt="X-Forwarded-Proto on MDN" border="0" height="308" src="https://2.bp.blogspot.com/-25FE9IbGZf4/Wr32xr4UKiI/AAAAAAAAAx8/e3psTmdRd4gmZVd-aXWAAIGuhlYntjZXgCK4BGAYYCw/s640/X-Forwarded-Proto%2Bheader-mdn.png" title="X-Forwarded-Proto on MDN" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">X-Forwarded-Proto on MDN</td></tr></tbody></table><br />To identify if a connection coming to your server is using HTTP - Hypertext Transfer Protocol or <a href="https://en.wikipedia.org/wiki/HTTPS" target="_blank">HTTPS</a> - Hypertext Transfer Protocol over <a href="https://en.wikipedia.org/wiki/Secure_Sockets_Layer" target="_blank">SSL / TLS</a>, you can check <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto" target="_blank">X-Forwarded-Proto header</a> of the request.<br /><br /><h3>Definitions on MDN</h3><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For" target="_blank">X-Forwarded-For</a> is the standard header to identify the original IP address of a client that connects to a server proxy or load balancer.<br /><br /><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto" target="_blank">X-Forwarded-Proto</a> is the standard header to identify the protocol used by the client to connect to a server proxy or load balancer.<br /><br /><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Host" target="_blank">X-Forwarded-Host</a> is the standard header to identify the original host requested by the client in the Host HTTP request header.<br /><br /><h3>Node.js</h3><div><div style="-en-codeblock: true; background-color: #fbfaf8; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); box-sizing: border-box; color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; padding: 8px;"><div style="font-family: Monaco;"><span style="color: #020001;">...<br />var app = express();<br />var checkProtocol = function (req, res, next) {</span></div><div style="font-family: Monaco;"><span style="color: #020001;">&nbsp;&nbsp;</span><span style="color: #020001;">console.log(req.headers['x-forwarded-for']);&nbsp;</span><span style="color: #020001;"><br />&nbsp;&nbsp;</span><span style="color: #020001;">console.log(req.headers['x-forwarded-host']);&nbsp;</span></div><div><span style="font-family: &quot;monaco&quot;;"><span style="color: #020001;">&nbsp; console.log(req.headers['x-forwarded-proto']);&nbsp;</span></span></div><div><span style="font-family: &quot;monaco&quot;;"><span style="color: #020001;">&nbsp; console.log(</span></span><span style="color: #020001; font-family: &quot;monaco&quot;;">req.headers.host);<br />&nbsp; console.log(</span><span style="color: #020001; font-family: &quot;monaco&quot;;">req.url);</span></div><div style="font-family: Monaco;"><span style="color: #020001;">};</span></div><div style="font-family: Monaco;"><span style="color: #020001;">app.use(</span><span style="color: #020001;">checkProtocol);<br />...</span></div></div></div><br />Thanks for reading!<br /><br /><a href="http://www.language-diary.com/p/jun711-language-diary.html" target="_blank">Jun</a><br /><br />